{"version":3,"file":"react-cool-forms.production.min.js","mappings":"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","sources":["webpack://ReactCoolForms/webpack/universalModuleDefinition","webpack://ReactCoolForms/external umd {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack://ReactCoolForms/webpack/bootstrap","webpack://ReactCoolForms/webpack/runtime/compat get default export","webpack://ReactCoolForms/webpack/runtime/define property getters","webpack://ReactCoolForms/webpack/runtime/hasOwnProperty shorthand","webpack://ReactCoolForms/webpack/runtime/make namespace object","webpack://ReactCoolForms/./src/utils.ts","webpack://ReactCoolForms/./src/context.ts","webpack://ReactCoolForms/./src/hooks.ts","webpack://ReactCoolForms/./src/form.tsx","webpack://ReactCoolForms/./src/field.tsx","webpack://ReactCoolForms/./src/repeater.tsx","webpack://ReactCoolForms/./src/debugger.tsx"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ReactCoolForms\", [\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactCoolForms\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactCoolForms\"] = factory(root[\"React\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__787__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__787__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const ROOT_FORM = 'ROOT_FORM';\r\nconst CONTEXT_ERROR = 'Context of Form not found!';\r\nconst HAS_REPEATER_VALIDATION_ERROR = 'HAS_REPEATER_VALIDATION_ERROR';\r\n\r\nfunction clone<T extends object | Array<any>>(value: T): T {\r\n  const isObject = typeof value === 'object';\r\n  const cloned = isObject ? (Array.isArray(value) ? [...value] : value ? { ...value } : value) : value;\r\n\r\n  cloned && isObject && Object.keys(cloned).forEach(key => (cloned[key] = clone(cloned[key])));\r\n\r\n  return cloned as unknown as T;\r\n}\r\n\r\nfunction detecIsFunction(value: unknown): value is Function {\r\n  return typeof value === 'function';\r\n}\r\n\r\nfunction dummy() {}\r\n\r\nfunction removePropertyValues<T extends object>(obj: T, value: any) {\r\n  Object.keys(obj).forEach(key => {\r\n    if (obj[key] === value) {\r\n      delete obj[key];\r\n    }\r\n  });\r\n}\r\n\r\nfunction hasKeys<T extends object>(obj: T): boolean {\r\n  return Object.keys(obj).length > 0;\r\n}\r\n\r\nfunction mergeArrayToObject<S, T extends object>(items: Array<T>, exclude?: string) {\r\n  const obj = {} as Record<string, S>;\r\n\r\n  for (const item of items) {\r\n    for (const key of Object.keys(item)) {\r\n      if (exclude && item[key] === exclude) continue;\r\n      obj[key] = item[key];\r\n    }\r\n  }\r\n\r\n  return obj;\r\n}\r\n\r\nfunction detectIsDeepEqual<T extends object>(o1: T, o2: T) {\r\n  return JSON.stringify(o1) === JSON.stringify(o2);\r\n}\r\n\r\nfunction transformOjectToArray<T>(obj: Record<string, T>) {\r\n  const items: Array<T> = [];\r\n  const keys = Object.keys(obj);\r\n\r\n  for (const key of keys) {\r\n    items.push(obj[key]);\r\n  }\r\n\r\n  return items;\r\n}\r\n\r\nexport {\r\n  ROOT_FORM,\r\n  CONTEXT_ERROR,\r\n  HAS_REPEATER_VALIDATION_ERROR,\r\n  clone,\r\n  detecIsFunction,\r\n  dummy,\r\n  removePropertyValues,\r\n  hasKeys,\r\n  mergeArrayToObject,\r\n  detectIsDeepEqual,\r\n  transformOjectToArray,\r\n};\r\n","import { createContext, useContext } from 'react';\r\n\r\nimport { type FormState } from './form';\r\nimport { CONTEXT_ERROR } from './utils';\r\n\r\nexport type FormContextValue<T extends object = any> = {\r\n  state: FormState<T>;\r\n};\r\n\r\nconst FormContext = createContext<FormContextValue>(null);\r\n\r\nfunction useFormContext<T extends object>() {\r\n  const value = useContext<FormContextValue<T>>(FormContext);\r\n\r\n  if (!value) {\r\n    throw new Error(CONTEXT_ERROR);\r\n  }\r\n\r\n  return value;\r\n}\r\n\r\nexport { FormContext, useFormContext };\r\n","import { useMemo, useState, useCallback, useEffect } from 'react';\r\n\r\nimport { useFormContext } from './context';\r\n\r\nfunction useEvent<T extends (...args) => any>(fn: T) {\r\n  const scope = useMemo(() => ({ fn }), []);\r\n\r\n  scope.fn = fn;\r\n\r\n  const callback = useCallback((...args) => {\r\n    return scope.fn(...args);\r\n  }, []);\r\n\r\n  return callback as unknown as T;\r\n}\r\n\r\nfunction useUpdate() {\r\n  const [_, forceUpdate] = useState(0);\r\n  const update = useCallback(() => forceUpdate(x => x + 1), []);\r\n\r\n  return { update };\r\n}\r\n\r\ntype UseFormStateOptions<T, S> = {\r\n  detectChanges: (formValue: T) => S;\r\n};\r\n\r\nfunction useFormState<T extends object, S = any>(\r\n  options: UseFormStateOptions<T, S> = { detectChanges: x => x as unknown as S },\r\n) {\r\n  const { detectChanges } = options;\r\n  const { state } = useFormContext<T>();\r\n  const { update } = useUpdate();\r\n  const {\r\n    formValue,\r\n    errors,\r\n    inProcess,\r\n    addSubscriber,\r\n    removeSubscriber,\r\n    addValidator,\r\n    removeValidator,\r\n    modify,\r\n    validate: sourceValidate,\r\n    submit,\r\n    reset,\r\n  } = state;\r\n  const validate = useEvent((formValue: T) => sourceValidate(formValue));\r\n  const lastValue = detectChanges(formValue);\r\n\r\n  const updateWhenChange = useEvent(() => {\r\n    if (detectChanges(state.formValue) !== lastValue) {\r\n      update();\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    addSubscriber(updateWhenChange);\r\n\r\n    return () => removeSubscriber(updateWhenChange);\r\n  }, []);\r\n\r\n  return {\r\n    formValue,\r\n    errors,\r\n    inProcess,\r\n    addValidator,\r\n    removeValidator,\r\n    modify,\r\n    validate,\r\n    submit,\r\n    reset,\r\n  };\r\n}\r\n\r\nexport { useEvent, useUpdate, useFormState };\r\n","import React, { useMemo, useState, useImperativeHandle, useEffect, useLayoutEffect } from 'react';\r\n\r\nimport { type SyntheticValidator, type Validator } from './types';\r\nimport { FormContext, type FormContextValue } from './context';\r\nimport {\r\n  ROOT_FORM,\r\n  HAS_REPEATER_VALIDATION_ERROR,\r\n  clone,\r\n  detecIsFunction,\r\n  hasKeys,\r\n  mergeArrayToObject,\r\n  detectIsDeepEqual,\r\n  removePropertyValues,\r\n} from './utils';\r\nimport { useEvent, useUpdate } from './hooks';\r\n\r\nexport type FormProps<T extends object> = {\r\n  name?: string;\r\n  initialFormValue: T;\r\n  connectedRef?: React.Ref<FormRef<T>>;\r\n  interrupt?: boolean;\r\n  validators?: Array<Validator<T, T>>;\r\n  children: (options: FormChildrenOptions<T>) => React.ReactElement;\r\n  onValidate?: (options: OnValidateOptions<T>) => void;\r\n  onChange?: (options: OnChangeOptions<T>) => void;\r\n  onUnmount?: () => void; // for internal use\r\n  onLift?: (lifted: Lifted) => void; // for internal use\r\n  onSubmit: (options: OnSubmitOptions<T>) => void;\r\n};\r\n\r\nfunction Form<T extends object>(props: FormProps<T>): React.ReactElement {\r\n  const {\r\n    name,\r\n    initialFormValue,\r\n    connectedRef,\r\n    validators: formValidators = [],\r\n    interrupt,\r\n    children,\r\n    onValidate,\r\n    onChange,\r\n    onUnmount,\r\n    onLift,\r\n    onSubmit,\r\n  } = props;\r\n  const { update } = useUpdate();\r\n  const [errors, setErrors] = useState<Record<string, string>>(null);\r\n  const [inProcess, setInProcess] = useState(false);\r\n  const scope = useMemo<FormScope<T>>(() => ({ formValue: clone(initialFormValue) }), []);\r\n  const formValue = scope.formValue;\r\n\r\n  useLayoutEffect(() => {\r\n    const validators: Array<SyntheticValidator> = formValidators.map(validator => {\r\n      return {\r\n        ...validator,\r\n        name: name || ROOT_FORM,\r\n        getValue: x => x,\r\n      };\r\n    });\r\n\r\n    validators.forEach(x => addValidator(x));\r\n\r\n    return () => {\r\n      validators.forEach(x => removeValidator(x));\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    return () => detecIsFunction(onUnmount) && onUnmount();\r\n  }, []);\r\n\r\n  const modify = useEvent((formValue: T) => {\r\n    scope.formValue = { ...formValue };\r\n\r\n    update();\r\n    onChange({ formValue: scope.formValue });\r\n  });\r\n\r\n  const notify = useEvent((formValue: T) => {\r\n    scope.formValue = { ...formValue };\r\n    const isRoot = !onLift;\r\n\r\n    onChange({ formValue: scope.formValue });\r\n\r\n    if (isRoot) {\r\n      state.formValue = scope.formValue;\r\n      state.subscribers.forEach(fn => fn());\r\n    }\r\n  });\r\n\r\n  const reset = useEvent(() => {\r\n    setErrors(null);\r\n    modify(clone(initialFormValue));\r\n    setTimeout(() => {\r\n      state.resetFns.forEach(fn => fn());\r\n    });\r\n  });\r\n\r\n  const validate = useEvent((formValue: T, isChild?: boolean): Promise<boolean> => {\r\n    const results: Array<boolean> = [];\r\n    const validators = state.validators;\r\n    let newErrors: Record<string, string> = null;\r\n\r\n    setInProcess(true);\r\n\r\n    const process = async () => {\r\n      for (const validator of validators) {\r\n        const fieldValue = validator.getValue(formValue);\r\n        const isValid = await validator.method({ formValue, fieldValue });\r\n\r\n        results.push(isValid);\r\n\r\n        if (detecIsFunction(validator.onValidate)) {\r\n          validator.onValidate({ isValid, fieldValue, nodeRef: validator.nodeRef });\r\n        }\r\n\r\n        if (!isValid) {\r\n          if (!newErrors) {\r\n            newErrors = {};\r\n          }\r\n          if (!newErrors[validator.name]) {\r\n            newErrors[validator.name] = validator.message;\r\n          }\r\n          if (interrupt || validator.interrupt) {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      const isValid = results.every(x => x);\r\n\r\n      if (!isValid) {\r\n        newErrors = hasKeys(newErrors) ? newErrors : null;\r\n      }\r\n\r\n      if (newErrors !== errors) {\r\n        lift({ from: 'validate', value: newErrors, skipUpdate: true });\r\n\r\n        if (isChild) {\r\n          if (!detectIsDeepEqual(newErrors, errors)) {\r\n            setErrors(newErrors);\r\n          }\r\n        } else {\r\n          lift({ from: 'validate' });\r\n        }\r\n      }\r\n\r\n      setInProcess(false);\r\n      onValidate({ formValue, errors: newErrors, isValid });\r\n\r\n      return isValid;\r\n    };\r\n\r\n    return new Promise<boolean>(async resolve => {\r\n      if (isChild) {\r\n        resolve(await process());\r\n      } else {\r\n        requestAnimationFrame(async () => {\r\n          resolve(await process());\r\n        });\r\n      }\r\n    });\r\n  });\r\n\r\n  const validateField = useEvent(async (options: ValidateFieldOptions<T>): Promise<boolean> => {\r\n    const { name, formValue, validators } = options;\r\n    let failedValidator: SyntheticValidator = null;\r\n    let newErrors: Record<string, string> = { ...(errors || {}) };\r\n    const fieldErrors: Record<string, string> = { ...(errors || {}) };\r\n\r\n    for (const validator of validators) {\r\n      const fieldValue = validator.getValue(formValue);\r\n      const isValid = await validator.method({ formValue, fieldValue });\r\n\r\n      fieldErrors[name] = undefined;\r\n\r\n      if (!isValid) {\r\n        const { message } = validator;\r\n\r\n        failedValidator = validator;\r\n        newErrors[name] = message;\r\n        fieldErrors[name] = message;\r\n        break;\r\n      }\r\n    }\r\n\r\n    const isValid = !failedValidator;\r\n\r\n    if (isValid) {\r\n      if (newErrors && newErrors[name]) {\r\n        delete newErrors[name];\r\n      }\r\n    }\r\n\r\n    newErrors = hasKeys(newErrors) ? newErrors : null;\r\n\r\n    if (!detectIsDeepEqual(newErrors, errors)) {\r\n      setErrors(newErrors);\r\n      lift({ from: 'validateField', value: fieldErrors });\r\n    }\r\n\r\n    onValidate({ formValue, errors: newErrors, isValid });\r\n\r\n    return isValid;\r\n  });\r\n\r\n  const lift = useEvent((lifted: Lifted) => {\r\n    if (detecIsFunction(onLift)) {\r\n      onLift(lifted);\r\n    } else {\r\n      const map: Record<Lifted['from'], () => void> = {\r\n        validate: () => {\r\n          const { skipUpdate } = lifted;\r\n          const liftedErrors = lifted.value as Record<string, string>;\r\n\r\n          if (skipUpdate) {\r\n            state.accumulatedErrors.push(liftedErrors);\r\n          } else {\r\n            const errors = state.accumulatedErrors.filter(Boolean);\r\n            const mergedErrors = mergeArrayToObject<string, {}>(errors, HAS_REPEATER_VALIDATION_ERROR);\r\n            const newErrors = hasKeys(mergedErrors) ? mergedErrors : null;\r\n\r\n            state.accumulatedErrors = [];\r\n            setErrors(newErrors);\r\n          }\r\n        },\r\n        validateField: () => {\r\n          const liftedErrors = lifted.value as Record<string, string | undefined>;\r\n          const keys = Object.keys(liftedErrors);\r\n          let newErrors: Record<string, string> = { ...(errors || {}) };\r\n\r\n          for (const key of keys) {\r\n            if (liftedErrors[key] !== HAS_REPEATER_VALIDATION_ERROR) {\r\n              newErrors[key] = liftedErrors[key];\r\n            }\r\n          }\r\n\r\n          removePropertyValues(newErrors, undefined);\r\n          newErrors = hasKeys(newErrors) ? newErrors : null;\r\n\r\n          if (!detectIsDeepEqual(newErrors, errors)) {\r\n            setErrors(newErrors);\r\n          }\r\n        },\r\n      };\r\n\r\n      map[lifted.from] && map[lifted.from]();\r\n    }\r\n  });\r\n\r\n  const submit = useEvent(async () => {\r\n    const { formValue } = scope;\r\n    const isValid = await validate(formValue);\r\n\r\n    isValid && onSubmit({ formValue });\r\n  });\r\n\r\n  const addSubscriber = useEvent((subscriber: () => void) => {\r\n    state.subscribers.push(subscriber);\r\n  });\r\n\r\n  const removeSubscriber = useEvent((subscriber: () => void) => {\r\n    const idx = state.subscribers.findIndex(x => x === subscriber);\r\n\r\n    if (idx !== -1) {\r\n      state.subscribers.splice(idx, 1);\r\n    }\r\n  });\r\n\r\n  const addValidator = useEvent((validator: SyntheticValidator) => {\r\n    state.validators.push(validator);\r\n  });\r\n\r\n  const removeValidator = useEvent((validator: SyntheticValidator) => {\r\n    const idx = state.validators.findIndex(x => x === validator);\r\n\r\n    if (idx !== -1) {\r\n      state.validators.splice(idx, 1);\r\n    }\r\n  });\r\n\r\n  const addResetFn = useEvent((fn: () => void) => {\r\n    state.resetFns.push(fn);\r\n  });\r\n\r\n  const removeResetFn = useEvent((fn: () => void) => {\r\n    const idx = state.resetFns.findIndex(x => x === fn);\r\n\r\n    if (idx !== -1) {\r\n      state.resetFns.splice(idx, 1);\r\n    }\r\n  });\r\n\r\n  const state = useMemo<FormState<T>>(\r\n    () => ({\r\n      formValue,\r\n      errors,\r\n      inProcess,\r\n      modify,\r\n      notify,\r\n      validate,\r\n      validateField,\r\n      submit,\r\n      reset,\r\n      addSubscriber,\r\n      removeSubscriber,\r\n      addValidator,\r\n      removeValidator,\r\n      addResetFn,\r\n      removeResetFn,\r\n      lift,\r\n      subscribers: [],\r\n      validators: [],\r\n      resetFns: [],\r\n      accumulatedErrors: [],\r\n    }),\r\n    [],\r\n  );\r\n\r\n  state.formValue = formValue;\r\n  state.errors = errors;\r\n  state.inProcess = inProcess;\r\n  state.modify = modify;\r\n  state.notify = notify;\r\n  state.validate = validate;\r\n  state.validateField = validateField;\r\n  state.submit = submit;\r\n  state.reset = reset;\r\n  state.lift = lift;\r\n\r\n  const value = useMemo<FormContextValue<T>>(() => ({ state }), [formValue, errors]);\r\n\r\n  useImperativeHandle(connectedRef, () => {\r\n    const ref: FormRef<T> = {\r\n      getFormValue: () => state.formValue,\r\n      modify,\r\n      validate,\r\n      submit,\r\n      reset,\r\n    };\r\n\r\n    return ref;\r\n  });\r\n\r\n  return (\r\n    <FormContext.Provider value={value}>\r\n      {children({ formValue, errors, inProcess, validate, reset, submit })}\r\n    </FormContext.Provider>\r\n  );\r\n}\r\n\r\nconst FormComponent: React.FC<FormProps<{}>> = Form;\r\n\r\nFormComponent.defaultProps = {\r\n  onValidate: () => {},\r\n  onChange: () => {},\r\n};\r\n\r\ntype FormScope<T extends object> = {\r\n  formValue: T;\r\n};\r\n\r\nexport type FormRef<T extends object> = {\r\n  getFormValue: () => T;\r\n  modify: (formValue: T) => void;\r\n  validate: (formValue: T, isChild?: boolean) => Promise<boolean>;\r\n  submit: () => void;\r\n  reset: () => void;\r\n};\r\n\r\nexport type FormState<T extends object> = {\r\n  formValue: T;\r\n  errors: Record<string, string> | null;\r\n  inProcess: boolean;\r\n  subscribers: Array<() => void>;\r\n  validators: Array<SyntheticValidator>;\r\n  resetFns: Array<() => void>;\r\n  notify: (formValue: T) => void;\r\n  addSubscriber: (subscriber: () => void) => void;\r\n  removeSubscriber: (subscriber: () => void) => void;\r\n  addValidator: (validator: SyntheticValidator) => void;\r\n  removeValidator: (validator: SyntheticValidator) => void;\r\n  addResetFn: (fn: () => void) => void;\r\n  removeResetFn: (fn: () => void) => void;\r\n  validateField: (options: ValidateFieldOptions<T>) => Promise<boolean>;\r\n  lift: (lifted: Lifted) => void;\r\n  accumulatedErrors: Array<Record<string, string>>;\r\n} & Pick<FormRef<T>, 'modify' | 'validate' | 'submit' | 'reset'>;\r\n\r\ntype ValidateFieldOptions<T extends object> = {\r\n  name: string;\r\n  formValue: T;\r\n  validators: Array<SyntheticValidator>;\r\n};\r\n\r\ntype SharedCallbackOptions<T extends object> = {\r\n  formValue: T;\r\n};\r\n\r\nexport type FormChildrenOptions<T extends object> = {\r\n  errors: Record<string, string>;\r\n  inProcess: boolean;\r\n} & SharedCallbackOptions<T> &\r\n  Pick<FormRef<T>, 'validate' | 'submit' | 'reset'>;\r\n\r\nexport type OnSubmitOptions<T extends object> = {} & SharedCallbackOptions<T>;\r\n\r\nexport type OnValidateOptions<T extends object> = {\r\n  isValid: boolean;\r\n  errors: Record<string, string> | null;\r\n} & SharedCallbackOptions<T>;\r\n\r\nexport type OnChangeOptions<T extends object> = {} & SharedCallbackOptions<T>;\r\n\r\ntype Lifted<T = unknown> = {\r\n  from: 'validateField' | 'validate';\r\n  value?: T;\r\n  skipUpdate?: boolean;\r\n};\r\n\r\nexport { Form };\r\n","import React, { memo, useEffect, useMemo, useRef } from 'react';\r\n\r\nimport { type Validator, type Formatter, type SyntheticValidator, type OnValidateFieldOptions } from './types';\r\nimport { useFormContext } from './context';\r\nimport { useUpdate, useEvent } from './hooks';\r\n\r\nexport type FieldProps<T, S extends object> = {\r\n  name: string;\r\n  getValue: (formValue: S) => T;\r\n  setValue: (formValue: S, fieldValue: T) => void;\r\n  validators?: Array<Validator<T, S>>;\r\n  formatter?: Formatter<T>;\r\n  updatingKey?: string | number;\r\n  enableOnChangeValidation?: boolean;\r\n  children: (options: FieldChildrenOptions<T>) => React.ReactElement;\r\n  onValidate?: (options: OnValidateFieldOptions<T>) => void;\r\n};\r\n\r\nfunction Field<T, S extends object>(props: FieldProps<T, S>): React.ReactElement {\r\n  const {\r\n    name,\r\n    getValue,\r\n    setValue,\r\n    formatter,\r\n    validators: fieldValidators = [],\r\n    updatingKey: externalUpdatingKey = '',\r\n    enableOnChangeValidation,\r\n    onValidate,\r\n  } = props;\r\n  const { state: formState } = useFormContext<S>();\r\n  const { formValue, errors, inProcess, addValidator, removeValidator, lift } = formState;\r\n  const { update } = useUpdate();\r\n  const value = getValue(formValue);\r\n  const nodeRef = useRef<HTMLElement>(null);\r\n  const error = errors ? errors[name] || null : null;\r\n  const scope = useMemo<FieldScope<T>>(() => ({ validators: [] }), []);\r\n  const formattedValue = useMemo(() => formatter({ prevValue: value, nextValue: value, node: null }), [value]);\r\n  const valueID = useMemo(() => getNextValueID(), [formattedValue]);\r\n  const updatingKey = `${externalUpdatingKey}:${valueID}:${error}:${inProcess}`;\r\n\r\n  useEffect(() => {\r\n    scope.validators = fieldValidators.map(validator => {\r\n      return {\r\n        ...validator,\r\n        name,\r\n        getValue,\r\n        nodeRef,\r\n        onValidate,\r\n      };\r\n    });\r\n    scope.validators.forEach(x => addValidator(x));\r\n\r\n    return () => {\r\n      scope.validators.forEach(x => removeValidator(x));\r\n      scope.validators = [];\r\n    };\r\n  }, [name]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      lift({ from: 'validateField', value: { [name]: undefined } });\r\n    };\r\n  }, []);\r\n\r\n  const notify = useEvent((value: T) => {\r\n    const { formValue, notify } = formState;\r\n\r\n    setValue(formValue, value);\r\n    notify(formValue);\r\n    update();\r\n  });\r\n\r\n  const validate = useEvent(async (): Promise<boolean> => {\r\n    const { formValue, validateField } = formState;\r\n    const validators = scope.validators;\r\n    const isValid =\r\n      validators.length === 0 ? await Promise.resolve(true) : await validateField({ name, formValue, validators });\r\n\r\n    return isValid;\r\n  });\r\n\r\n  const handleChange = useEvent((value: T) => {\r\n    const newFormattedValue = formatter({\r\n      prevValue: formattedValue,\r\n      nextValue: value,\r\n      node: nodeRef.current,\r\n    });\r\n\r\n    notify(newFormattedValue);\r\n    enableOnChangeValidation && (async () => await validate())();\r\n  });\r\n\r\n  return (\r\n    <FieldInner\r\n      {...props}\r\n      updatingKey={updatingKey}\r\n      nodeRef={nodeRef}\r\n      value={formattedValue}\r\n      error={error}\r\n      notify={notify}\r\n      validate={validate}\r\n      onChange={handleChange}\r\n    />\r\n  );\r\n}\r\n\r\nconst FieldComponent: React.FC<FieldProps<unknown, {}>> = Field;\r\n\r\nFieldComponent.defaultProps = {\r\n  formatter: ({ nextValue }) => nextValue,\r\n  onValidate: () => {},\r\n};\r\n\r\ntype FieldScope<T> = {\r\n  validators: Array<SyntheticValidator>;\r\n};\r\n\r\nexport type FieldInnerProps<T, S extends object> = {\r\n  updatingKey: string;\r\n} & FieldProps<T, S> &\r\n  FieldChildrenOptions<T>;\r\n\r\nconst FieldInner = memo(\r\n  function <T, S extends object>(props: FieldInnerProps<T, S>): React.ReactElement {\r\n    const { name, nodeRef, value, error, children, validate, notify, onChange } = props;\r\n\r\n    return children({ name, nodeRef, value, error, validate, notify, onChange });\r\n  },\r\n  (prevProps, nextProps) => prevProps.updatingKey === nextProps.updatingKey,\r\n);\r\n\r\nexport type FieldChildrenOptions<T> = {\r\n  name: string;\r\n  value: T;\r\n  error: string | null;\r\n  validate: () => Promise<boolean>;\r\n  notify: (value: T) => void;\r\n  onChange: (value: T) => void;\r\n} & Pick<OnValidateFieldOptions<T>, 'nodeRef'>;\r\n\r\nlet nextValueID = 0;\r\n\r\nconst getNextValueID = () => ++nextValueID;\r\n\r\nexport { Field, type OnValidateFieldOptions };\r\n","import React, { useRef, useEffect, useMemo, useImperativeHandle } from 'react';\r\n\r\nimport { type SyntheticValidator } from './types';\r\nimport { useFormContext } from './context';\r\nimport { Form, type OnChangeOptions, type FormRef, type FormChildrenOptions } from './form';\r\nimport { HAS_REPEATER_VALIDATION_ERROR, detecIsFunction, dummy, transformOjectToArray } from './utils';\r\nimport { useEvent } from './hooks';\r\n\r\nexport type RepeaterProps<T extends object, S extends object> = {\r\n  name: string;\r\n  connectedRef?: React.Ref<RepeaterRef<T>>;\r\n  getValue: (formValue: S) => Array<T>;\r\n  setValue: (formValue: S, fieldValue: Array<T>) => void;\r\n  getKey: (formValue: T) => Key;\r\n  interrupt?: boolean;\r\n  triggerPosition?: 'before' | 'after';\r\n  renderTrigger?: (options: RenderTriggerOptions<T>) => React.ReactElement;\r\n  children: (options: RepeaterChildrenOptions<T>) => React.ReactElement;\r\n};\r\n\r\nfunction Repeater<T extends object, S extends object>(props: RepeaterProps<T, S>): React.ReactElement {\r\n  const { name, connectedRef, getValue, setValue, getKey, interrupt, renderTrigger, triggerPosition, children } = props;\r\n  const { state: formState } = useFormContext<S>();\r\n  const { formValue, modify, notify, inProcess, addValidator, removeValidator, addResetFn, removeResetFn, lift } =\r\n    formState;\r\n  const items = getValue(formValue);\r\n  const formRefs = useRef<Record<string, FormRef<T>>>({});\r\n  const scope = useMemo(() => ({ shouldFocusIdx: -1 }), []);\r\n\r\n  useEffect(() => {\r\n    const method = async () => {\r\n      const results: Array<boolean> = [];\r\n      const refs = transformOjectToArray(formRefs.current);\r\n\r\n      for (const ref of refs) {\r\n        const isValid = await ref.validate(ref.getFormValue(), true);\r\n\r\n        results.push(isValid);\r\n\r\n        if (!isValid && interrupt) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      const isValid = results.every(x => x);\r\n\r\n      return isValid;\r\n    };\r\n\r\n    const validator: SyntheticValidator = {\r\n      name,\r\n      method,\r\n      message: HAS_REPEATER_VALIDATION_ERROR,\r\n      getValue: () => null,\r\n    };\r\n\r\n    addValidator(validator);\r\n\r\n    return () => removeValidator(validator);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const resetFn = () => {\r\n      const refs = transformOjectToArray(formRefs.current);\r\n\r\n      refs.forEach(ref => ref.reset());\r\n    };\r\n\r\n    addResetFn(resetFn);\r\n\r\n    return () => removeResetFn(resetFn);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    scope.shouldFocusIdx = -1;\r\n  });\r\n\r\n  const handleUnmount = (key: Key) => () => {\r\n    delete formRefs.current[key];\r\n  };\r\n\r\n  const handleChange =\r\n    (idx: number) =>\r\n    ({ formValue: item }: OnChangeOptions<T>) => {\r\n      const { formValue } = formState;\r\n      const items = getValue(formValue);\r\n\r\n      items[idx] = item;\r\n      setValue(formValue, items);\r\n      notify(formValue);\r\n    };\r\n\r\n  const append = useEvent((item: T, shouldFocus?: boolean) => {\r\n    const { formValue } = formState; // important\r\n    const items = getValue(formValue);\r\n\r\n    items.push(item);\r\n    setValue(formValue, items);\r\n    modify(formValue);\r\n    shouldFocus && (scope.shouldFocusIdx = items.length - 1);\r\n  });\r\n\r\n  const prepend = useEvent((item: T, shouldFocus?: boolean) => {\r\n    const { formValue } = formState;\r\n    const items = getValue(formValue);\r\n\r\n    items.unshift(item);\r\n    setValue(formValue, items);\r\n    modify(formValue);\r\n    shouldFocus && (scope.shouldFocusIdx = 0);\r\n  });\r\n\r\n  const insert = useEvent((idx: number, item: T, shouldFocus?: boolean) => {\r\n    const { formValue } = formState;\r\n    const items = getValue(formValue);\r\n\r\n    items.splice(idx, 0, item);\r\n    setValue(formValue, items);\r\n    modify(formValue);\r\n    shouldFocus && (scope.shouldFocusIdx = idx);\r\n  });\r\n\r\n  const swap = useEvent((from: number, to: number) => {\r\n    const { formValue } = formState;\r\n    const items = getValue(formValue);\r\n    const itemFrom = items[from];\r\n    const itemTo = items[to];\r\n\r\n    if (!itemFrom || !itemTo) return;\r\n\r\n    items[from] = itemTo;\r\n    items[to] = itemFrom;\r\n    setValue(formValue, items);\r\n    modify(formValue);\r\n  });\r\n\r\n  const remove = useEvent((sourceIdx: number | Array<number>) => {\r\n    const { formValue } = formState;\r\n    const idxs = Array.isArray(sourceIdx) ? sourceIdx : [sourceIdx];\r\n    const items = getValue(formValue);\r\n\r\n    for (const idx of idxs) {\r\n      items.splice(idx, 1);\r\n    }\r\n\r\n    setValue(formValue, items);\r\n    modify(formValue);\r\n  });\r\n\r\n  useImperativeHandle(connectedRef, () => {\r\n    const ref: RepeaterRef<T> = {\r\n      append,\r\n      prepend,\r\n      insert,\r\n      swap,\r\n      remove,\r\n    };\r\n\r\n    return ref;\r\n  });\r\n\r\n  const isAfter = triggerPosition === 'after';\r\n  const isBefore = !isAfter;\r\n  const isSingle = items.length === 1;\r\n  const size = items.length;\r\n\r\n  return (\r\n    <>\r\n      {isBefore &&\r\n        detecIsFunction(renderTrigger) &&\r\n        renderTrigger({ size, append, prepend, insert, swap, remove, inProcess })}\r\n      {items.map((item, idx) => {\r\n        const key = getKey(item);\r\n        const isFirst = idx === 0;\r\n        const isLast = idx === items.length - 1;\r\n        const isEven = idx % 2 === 0;\r\n        const isOdd = !isEven;\r\n        const shouldFocus = scope.shouldFocusIdx === idx;\r\n        const setRef = (ref: FormRef<T>) => {\r\n          formRefs.current[key] = ref;\r\n        };\r\n\r\n        return (\r\n          <Form\r\n            key={key}\r\n            connectedRef={setRef}\r\n            initialFormValue={item}\r\n            onChange={handleChange(idx)}\r\n            onUnmount={handleUnmount(key)}\r\n            onLift={lift}\r\n            onSubmit={dummy}>\r\n            {({ formValue, errors, inProcess }) => {\r\n              return children({\r\n                key,\r\n                idx,\r\n                isFirst,\r\n                isLast,\r\n                isEven,\r\n                isOdd,\r\n                isSingle,\r\n                size,\r\n                shouldFocus,\r\n                formValue,\r\n                errors,\r\n                inProcess,\r\n                remove,\r\n              });\r\n            }}\r\n          </Form>\r\n        );\r\n      })}\r\n      {isAfter &&\r\n        detecIsFunction(renderTrigger) &&\r\n        renderTrigger({ size, append, prepend, insert, swap, remove, inProcess })}\r\n    </>\r\n  );\r\n}\r\n\r\nconst RepeaterComponent: React.FC<RepeaterProps<{}, {}>> = Repeater;\r\n\r\nRepeaterComponent.defaultProps = {\r\n  triggerPosition: 'after',\r\n};\r\n\r\nexport type RepeaterChildrenOptions<T extends object> = {\r\n  key: Key;\r\n  idx: number;\r\n  isFirst: boolean;\r\n  isLast: boolean;\r\n  isEven: boolean;\r\n  isOdd: boolean;\r\n  isSingle: boolean;\r\n  size: number;\r\n  shouldFocus: boolean;\r\n  remove: (idx: number | Array<number>) => void;\r\n} & Pick<FormChildrenOptions<T>, 'formValue' | 'errors' | 'inProcess'>;\r\n\r\nexport type RenderTriggerOptions<T extends object> = {\r\n  size: number;\r\n  append: (item: T, shouldFocus?: boolean) => void;\r\n  prepend: (item: T, shouldFocus?: boolean) => void;\r\n  insert: (idx: number, item: T, shouldFocus?: boolean) => void;\r\n  swap: (from: number, to: number) => void;\r\n} & Pick<FormChildrenOptions<T>, 'inProcess'> &\r\n  Pick<RepeaterChildrenOptions<T>, 'remove'>;\r\n\r\nexport type RepeaterRef<T extends object> = {} & Pick<\r\n  RenderTriggerOptions<T>,\r\n  'append' | 'prepend' | 'insert' | 'swap' | 'remove'\r\n>;\r\n\r\ntype Key = string | number;\r\n\r\nexport { Repeater };\r\n","import React, { useMemo } from 'react';\r\n\r\nimport { useFormState } from './hooks';\r\n\r\nexport type DebuggerProps = {};\r\n\r\nconst Debugger: React.FC<DebuggerProps> = () => {\r\n  const { formValue, errors } = useFormState();\r\n  const style: React.CSSProperties = useMemo(\r\n    () => ({\r\n      display: 'block',\r\n      backgroundColor: '#efefef',\r\n      padding: 16,\r\n      marginTop: 0,\r\n      marginBottom: 0,\r\n    }),\r\n    [],\r\n  );\r\n  const value = useMemo(\r\n    () =>\r\n      JSON.stringify(\r\n        {\r\n          errors,\r\n          formValue,\r\n        },\r\n        null,\r\n        2,\r\n      ),\r\n    [formValue, errors],\r\n  );\r\n\r\n  return <pre style={style}>{value}</pre>;\r\n};\r\n\r\nexport { Debugger };\r\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__787__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","HAS_REPEATER_VALIDATION_ERROR","clone","isObject","cloned","Array","isArray","keys","forEach","detecIsFunction","dummy","hasKeys","length","detectIsDeepEqual","o1","o2","JSON","stringify","transformOjectToArray","items","push","FormContext","createContext","useFormContext","useContext","Error","useEvent","fn","scope","useMemo","callback","useCallback","args","useUpdate","useState","forceUpdate","update","x","useFormState","options","detectChanges","state","formValue","errors","inProcess","addSubscriber","removeSubscriber","addValidator","removeValidator","modify","sourceValidate","submit","reset","validate","lastValue","updateWhenChange","useEffect","Form","props","name","initialFormValue","connectedRef","formValidators","interrupt","children","onValidate","onChange","onUnmount","onLift","onSubmit","setErrors","setInProcess","useLayoutEffect","validators","map","validator","getValue","notify","isRoot","subscribers","setTimeout","resetFns","isChild","results","newErrors","process","fieldValue","method","isValid","nodeRef","message","every","lift","from","skipUpdate","Promise","resolve","requestAnimationFrame","validateField","failedValidator","fieldErrors","lifted","liftedErrors","accumulatedErrors","mergedErrors","exclude","item","mergeArrayToObject","filter","Boolean","subscriber","idx","findIndex","splice","addResetFn","removeResetFn","useImperativeHandle","getFormValue","Provider","defaultProps","Field","setValue","formatter","fieldValidators","externalUpdatingKey","enableOnChangeValidation","formState","useRef","error","formattedValue","prevValue","nextValue","node","valueID","getNextValueID","updatingKey","handleChange","newFormattedValue","current","FieldInner","memo","prevProps","nextProps","nextValueID","Repeater","getKey","renderTrigger","triggerPosition","formRefs","shouldFocusIdx","refs","ref","resetFn","handleUnmount","append","shouldFocus","prepend","unshift","insert","swap","to","itemFrom","itemTo","remove","sourceIdx","idxs","isAfter","isBefore","isSingle","size","isFirst","isLast","isEven","isOdd","Debugger","style","display","backgroundColor","padding","marginTop","marginBottom"],"sourceRoot":""}