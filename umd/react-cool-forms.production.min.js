!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("react")):"function"==typeof define&&define.amd?define("ReactCoolForms",["react"],r):"object"==typeof exports?exports.ReactCoolForms=r(require("react")):e.ReactCoolForms=r(e.React)}(self,(e=>(()=>{"use strict";var r={787:r=>{r.exports=e}},n={};function t(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return r[e](a,a.exports,t),a.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{t.r(o),t.d(o,{Debugger:()=>T,Field:()=>O,Form:()=>b,Repeater:()=>C,useFormState:()=>w});var e=t(787),r=t.n(e),n=function(){return n=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},n.apply(this,arguments)},a=function(e){var r="function"==typeof Symbol&&Symbol.iterator,n=r&&e[r],t=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},u="HAS_REPEATER_VALIDATION_ERROR";function i(e){var r="object"==typeof e,t=r?Array.isArray(e)?function(e,r,n){if(n||2===arguments.length)for(var t,o=0,a=r.length;o<a;o++)!t&&o in r||(t||(t=Array.prototype.slice.call(r,0,o)),t[o]=r[o]);return e.concat(t||Array.prototype.slice.call(r))}([],function(e,r){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var t,o,a=n.call(e),u=[];try{for(;(void 0===r||r-- >0)&&!(t=a.next()).done;)u.push(t.value)}catch(e){o={error:e}}finally{try{t&&!t.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return u}(e),!1):e?n({},e):e:e;return t&&r&&Object.keys(t).forEach((function(e){return t[e]=i(t[e])})),t}function l(e){return"function"==typeof e}function c(){}function f(e){return Object.keys(e).length>0}function s(e,r){return JSON.stringify(e)===JSON.stringify(r)}var d=function(){return d=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},d.apply(this,arguments)},v=function(e,r,n,t){return new(n||(n=Promise))((function(o,a){function u(e){try{l(t.next(e))}catch(e){a(e)}}function i(e){try{l(t.throw(e))}catch(e){a(e)}}function l(e){var r;e.done?o(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(u,i)}l((t=t.apply(e,r||[])).next())}))},p=function(e,r){var n,t,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,t&&(o=2&a[0]?t.return:a[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,a[1])).done)return o;switch(t=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,t=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=r.call(e,u)}catch(e){a=[6,e],t=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},y=function(e,r){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var t,o,a=n.call(e),u=[];try{for(;(void 0===r||r-- >0)&&!(t=a.next()).done;)u.push(t.value)}catch(e){o={error:e}}finally{try{t&&!t.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return u},h=function(e){var r="function"==typeof Symbol&&Symbol.iterator,n=r&&e[r],t=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},m=function(e,r,n){if(n||2===arguments.length)for(var t,o=0,a=r.length;o<a;o++)!t&&o in r||(t||(t=Array.prototype.slice.call(r,0,o)),t[o]=r[o]);return e.concat(t||Array.prototype.slice.call(r))};function b(n){var t=this,o=(n.name,n.initialFormValue),c=n.connectedRef,m=n.interruptValidation,b=n.children,V=n.onValidate,w=n.onChange,F=n.onUnmount,S=n.onLift,E=n.onSubmit,O=y((0,e.useState)(i(o)),2),R=O[0],P=O[1],k=y((0,e.useState)(null),2),j=k[0],C=k[1],T=y((0,e.useState)(!1),2),A=T[0],I=T[1];(0,e.useEffect)((function(){return function(){return l(F)&&F()}}),[]);var M=x((function(e){var r=d({},e);P(r),w({formValue:r})})),_=x((function(){C(null),M(i(o)),setTimeout((function(){q.resetFns.forEach((function(e){return e()}))}))})),K=x((function(e,r){return v(t,void 0,void 0,(function(){var n,t,o,a,u,i,c,d,v,y,b,g;return p(this,(function(p){switch(p.label){case 0:n=[],t=q.validators,o=null,I(!0),p.label=1;case 1:p.trys.push([1,6,7,8]),a=h(t),u=a.next(),p.label=2;case 2:return u.done?[3,5]:(i=u.value,c=i.getValue(e),[4,i.method({formValue:e,fieldValue:c})]);case 3:if(d=p.sent(),n.push(d),l(i.onValidate)&&i.onValidate({isValid:d,fieldValue:c,nodeRef:i.nodeRef}),!d&&(o||(o={}),o[i.name]||(o[i.name]=i.message),m))return[3,5];p.label=4;case 4:return u=a.next(),[3,2];case 5:return[3,8];case 6:return v=p.sent(),b={error:v},[3,8];case 7:try{u&&!u.done&&(g=a.return)&&g.call(a)}finally{if(b)throw b.error}return[7];case 8:return(y=n.every((function(e){return e})))||(o=f(o)?o:null),o!==j&&(L({from:"validate",value:o,skipUpdate:!0}),r?s(o,j)||C(o):L({from:"validate"})),I(!1),V({formValue:e,errors:o,isValid:y}),[2,y]}}))}))})),B=x((function(e){return v(t,void 0,void 0,(function(){var r,n,t,o,a,u,i,l,c,v,y,m,b,g,w,x;return p(this,(function(p){switch(p.label){case 0:r=e.name,n=e.formValue,t=e.validators,o=null,a=d({},j||{}),u=d({},j||{}),p.label=1;case 1:p.trys.push([1,6,7,8]),i=h(t),l=i.next(),p.label=2;case 2:return l.done?[3,5]:(c=l.value,v=c.getValue(n),[4,c.method({formValue:n,fieldValue:v})]);case 3:if(y=p.sent(),u[r]=void 0,!y)return m=c.message,o=c,a[r]=m,u[r]=m,[3,5];p.label=4;case 4:return l=i.next(),[3,2];case 5:return[3,8];case 6:return b=p.sent(),w={error:b},[3,8];case 7:try{l&&!l.done&&(x=i.return)&&x.call(i)}finally{if(w)throw w.error}return[7];case 8:return(g=!o)&&a&&a[r]&&delete a[r],s(a=f(a)?a:null,j)||(C(a),L({from:"validateField",value:u})),V({formValue:n,errors:a,isValid:g}),[2,g]}}))}))})),L=x((function(e){if(l(S))S(e);else{var r={validate:function(){var r=e.skipUpdate,n=e.value;if(r)q.accumulatedErrors.push(n);else{var t=function(e,r){var n,t,o,u,i={};try{for(var l=a(e),c=l.next();!c.done;c=l.next()){var f=c.value;try{for(var s=(o=void 0,a(Object.keys(f))),d=s.next();!d.done;d=s.next()){var v=d.value;f[v]===r||(i[v]=f[v])}}catch(e){o={error:e}}finally{try{d&&!d.done&&(u=s.return)&&u.call(s)}finally{if(o)throw o.error}}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(n)throw n.error}}return i}(q.accumulatedErrors.filter(Boolean),u),o=f(t)?t:null;q.accumulatedErrors=[],C(o)}},validateField:function(){var r,n,t,o=e.value,a=Object.keys(o),i=d({},j||{});try{for(var l=h(a),c=l.next();!c.done;c=l.next()){var v=c.value;o[v]!==u&&(i[v]=o[v])}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}t=i,Object.keys(t).forEach((function(e){void 0===t[e]&&delete t[e]})),s(i=f(i)?i:null,j)||C(i)}};r[e.from]&&r[e.from]()}})),N=x((function(){return v(t,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return[4,K(R)];case 1:return e.sent()&&E({formValue:R}),[2]}}))}))})),U=x((function(e){q.validators.push(e)})),z=x((function(e){var r=q.validators.findIndex((function(r){return r===e}));-1!==r&&q.validators.splice(r,1)})),G=x((function(e){q.resetFns.push(e)})),J=x((function(e){var r=q.resetFns.findIndex((function(r){return r===e}));-1!==r&&q.resetFns.splice(r,1)})),q=(0,e.useMemo)((function(){return{formValue:R,errors:j,inProcess:A,modify:M,validate:K,validateField:B,submit:N,reset:_,addValidator:U,removeValidator:z,addResetFn:G,removeResetFn:J,lift:L,validators:[],resetFns:[],accumulatedErrors:[]}}),[]);q.formValue=R,q.errors=j,q.inProcess=A,q.modify=M,q.validate=K,q.validateField=B,q.submit=N,q.reset=_,q.addValidator=U,q.removeValidator=z,q.addResetFn=G,q.removeResetFn=J,q.lift=L;var D=(0,e.useMemo)((function(){return{scope:q}}),[R,j]);return(0,e.useImperativeHandle)(c,(function(){return{getFormValue:function(){return R},modify:M,validate:K,submit:N,reset:_}})),r().createElement(g.Provider,{value:D},b({formValue:R,errors:j,inProcess:A,validate:K,reset:_,submit:N}))}b.defaultProps={onValidate:function(){},onChange:function(){}};var g=(0,e.createContext)(null);function V(){var r=(0,e.useContext)(g);if(!r)throw new Error("Context of Form not found!");return r}function w(){var e=V().scope;return d({},e)}function x(r){var n=(0,e.useMemo)((function(){return{fn:r}}),[]);n.fn=r;var t=(0,e.useCallback)((function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n.fn.apply(n,m([],y(e),!1))}),[]);return t}var F=function(){return F=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},F.apply(this,arguments)},S=function(e,r,n,t){return new(n||(n=Promise))((function(o,a){function u(e){try{l(t.next(e))}catch(e){a(e)}}function i(e){try{l(t.throw(e))}catch(e){a(e)}}function l(e){var r;e.done?o(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(u,i)}l((t=t.apply(e,r||[])).next())}))},E=function(e,r){var n,t,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,t&&(o=2&a[0]?t.return:a[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,a[1])).done)return o;switch(t=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,t=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=r.call(e,u)}catch(e){a=[6,e],t=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function O(n){var t=this,o=n.name,a=n.getValue,u=n.setValue,i=n.validators,l=void 0===i?[]:i,c=n.updatingKey,f=void 0===c?"":c,s=n.enableOnChangeValidation,d=n.onValidate,v=V().scope,p=v.formValue,y=v.errors,h=v.inProcess,m=v.addValidator,b=v.removeValidator,g=(0,e.useRef)(null),w=a(p),O=y&&y[o]||null,P=(0,e.useMemo)((function(){return k()}),[w]),j=(0,e.useMemo)((function(){return{nodeRef:g,validators:[],onValidate:d}}),[]),C="".concat(f,":").concat(P,":").concat(O,":").concat(h);j.nodeRef=g,j.onValidate=d,(0,e.useEffect)((function(){return j.validators=l.map((function(e){return F(F({},e),{name:o,getValue:a,nodeRef:j.nodeRef,onValidate:j.onValidate})})),j.validators.forEach((function(e){return m(e)})),function(){j.validators.forEach((function(e){return b(e)})),j.validators=[]}}),[]);var T=x((function(e){var r=v.formValue,n=v.modify;u(r,e),n(r),s&&S(t,void 0,void 0,(function(){return E(this,(function(e){switch(e.label){case 0:return[4,A()];case 1:return[2,e.sent()]}}))}))})),A=x((function(){return S(t,void 0,void 0,(function(){var e,r,n,t;return E(this,(function(a){switch(a.label){case 0:return e=v.formValue,r=v.validateField,0!==(n=j.validators).length?[3,2]:[4,Promise.resolve(!0)];case 1:return t=a.sent(),[3,4];case 2:return[4,r({name:o,formValue:e,validators:n})];case 3:t=a.sent(),a.label=4;case 4:return[2,t]}}))}))}));return r().createElement(R,F({},n,{updatingKey:C,nodeRef:g,value:w,error:O,validate:A,onChange:T}))}O.defaultProps={onValidate:function(){}};var R=(0,e.memo)((function(e){var r=e.name,n=e.nodeRef,t=e.value,o=e.error;return(0,e.children)({name:r,nodeRef:n,value:t,error:o,validate:e.validate,onChange:e.onChange})}),(function(e,r){return e.updatingKey===r.updatingKey})),P=0,k=function(){return++P},j=function(e){var r="function"==typeof Symbol&&Symbol.iterator,n=r&&e[r],t=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};function C(n){var t=this,o=n.name,a=n.getValue,i=n.setValue,f=n.getKey,s=n.interruptValidation,d=n.renderTrigger,v=n.tringgerPosition,p=n.children,y=V().scope,h=y.formValue,m=y.modify,g=y.inProcess,w=y.addValidator,F=y.removeValidator,S=y.addResetFn,E=y.removeResetFn,O=y.lift,R=a(h),P=(0,e.useRef)([]),k=(0,e.useMemo)((function(){return{shouldFocusIdx:-1}}),[]);(0,e.useEffect)((function(){var e={name:o,method:function(){return e=t,r=void 0,o=function(){var e,r,n,t,o,a,u,i,l;return function(e,r){var n,t,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,t&&(o=2&a[0]?t.return:a[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,a[1])).done)return o;switch(t=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,t=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=r.call(e,u)}catch(e){a=[6,e],t=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}(this,(function(c){switch(c.label){case 0:e=[],r=P.current.filter(Boolean),c.label=1;case 1:c.trys.push([1,6,7,8]),n=j(r),t=n.next(),c.label=2;case 2:return t.done?[3,5]:[4,(o=t.value).validate(o.getFormValue(),!0)];case 3:if(a=c.sent(),e.push(a),!a&&s)return[3,5];c.label=4;case 4:return t=n.next(),[3,2];case 5:return[3,8];case 6:return u=c.sent(),i={error:u},[3,8];case 7:try{t&&!t.done&&(l=n.return)&&l.call(n)}finally{if(i)throw i.error}return[7];case 8:return[2,e.every((function(e){return e}))]}}))},new((n=void 0)||(n=Promise))((function(t,a){function u(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(u,i)}l((o=o.apply(e,r||[])).next())}));var e,r,n,o},message:u,getValue:function(){return null}};return w(e),function(){return F(e)}}),[]),(0,e.useEffect)((function(){var e=function(){P.current.filter(Boolean).forEach((function(e){return e.reset()}))};return S(e),function(){return E(e)}}),[]),(0,e.useEffect)((function(){k.shouldFocusIdx=-1}));var C=function(e){return function(){P.current.splice(e,1)}},T=function(e){return function(r){var n=r.formValue,t=a(h);t[e]=n,i(h,t),m(h)}},A=x((function(e,r){var n=a(h);n.push(e),i(h,n),m(h),r&&(k.shouldFocusIdx=n.length-1)})),I=x((function(e,r){var n=a(h);n.unshift(e),i(h,n),m(h),r&&(k.shouldFocusIdx=0)})),M=x((function(e,r,n){var t=a(h);t.splice(e,0,r),i(h,t),m(h),n&&(k.shouldFocusIdx=e)})),_=x((function(e,r){var n=a(h),t=n[e],o=n[r];t&&o&&(n[e]=o,n[r]=t,i(h,n),m(h))})),K=x((function(e){var r,n,t=Array.isArray(e)?e:[e],o=a(h);try{for(var u=j(t),l=u.next();!l.done;l=u.next()){var c=l.value;o.splice(c,1)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}i(h,o),m(h)})),B="after"===v,L=!B,N=1===R.length,U=R.length;return r().createElement(r().Fragment,null,L&&l(d)&&d({size:U,append:A,prepend:I,insert:M,swap:_,remove:K,inProcess:g}),R.map((function(e,n){var t=f(e),o=0===n,a=n===R.length-1,u=n%2==0,i=!u,l=k.shouldFocusIdx===n;return r().createElement(b,{key:t,connectedRef:function(e){return P.current[n]=e},initialFormValue:e,onChange:T(n),onUnmount:C(n),onLift:O,onSubmit:c},(function(e){var r=e.formValue,t=e.errors,c=e.inProcess;return p({idx:n,isFirst:o,isLast:a,isEven:u,isOdd:i,isSingle:N,size:U,shouldFocus:l,formValue:r,errors:t,inProcess:c,remove:K})}))})),B&&l(d)&&d({size:U,append:A,prepend:I,insert:M,swap:_,remove:K,inProcess:g}))}C.defaultProps={tringgerPosition:"after"};var T=function(){var n=w(),t=n.formValue,o=n.errors,a=(0,e.useMemo)((function(){return{display:"block",backgroundColor:"#efefef",padding:16,marginTop:16,marginBottom:16}}),[]),u=(0,e.useMemo)((function(){return JSON.stringify({errors:o,formValue:t},null,2)}),[t,o]);return r().createElement("pre",{style:a},u)}})(),o})()));
//# sourceMappingURL=react-cool-forms.production.min.js.map